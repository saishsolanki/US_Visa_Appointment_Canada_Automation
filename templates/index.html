<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>US Visa Appointment Checker - Strategic Configuration</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 20px; background-color: #f5f5f5; }
        .container { max-width: 700px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 30px; }
        h2 { margin-top: 25px; margin-bottom: 15px; }
        form { max-width: 100%; }
        label { display: block; margin-top: 15px; font-weight: 500; color: #34495e; }
        input, select { width: 100%; padding: 10px; margin-top: 5px; border: 2px solid #e1e1e1; border-radius: 5px; box-sizing: border-box; }
        input:focus { border-color: #3498db; outline: none; }
        input[type="checkbox"] { width: auto; margin-right: 8px; transform: scale(1.2); }
        small { display: block; color: #7f8c8d; font-size: 0.9em; margin-bottom: 10px; line-height: 1.4; }
        button { margin-top: 30px; padding: 12px 24px; background: linear-gradient(135deg, #3498db, #2980b9); color: white; border: none; cursor: pointer; border-radius: 5px; font-size: 16px; width: 100%; }
        button:hover { background: linear-gradient(135deg, #2980b9, #21618c); }
        .section { margin-bottom: 25px; }
        .info-box { background-color: #f0f8ff; border-left: 4px solid #1e90ff; padding: 15px; margin: 20px 0; border-radius: 0 5px 5px 0; }
        .checkbox-label { display: flex; align-items: center; margin-top: 15px; }
        .checkbox-label input[type="checkbox"] { margin-right: 10px; margin-top: 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ US Visa Appointment Checker - Strategic Configuration</h1>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div style="background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        <div class="info-box">
            <h3 style="margin-top: 0; color: #1e90ff;">‚ÑπÔ∏è Configuration Status</h3>
            <p style="margin-bottom: 0;">
                <strong>Strategic Optimizations:</strong> 
                {% if current.BURST_MODE_ENABLED == 'True' %}‚úÖ Burst Mode{% else %}‚ùå Burst Mode{% endif %} ‚Ä¢ 
                {% if current.MULTI_LOCATION_CHECK == 'True' %}‚úÖ Multi-Location{% else %}‚ùå Multi-Location{% endif %} ‚Ä¢ 
                {% if current.PATTERN_LEARNING_ENABLED == 'True' %}‚úÖ Pattern Learning{% else %}‚ùå Pattern Learning{% endif %}
                <br>
                <strong>Expected Performance:</strong> 
                {% if current.BURST_MODE_ENABLED == 'True' and current.MULTI_LOCATION_CHECK == 'True' %}
                    üöÄ 3-5x faster detection with strategic optimizations enabled
                {% else %}
                    ‚ö†Ô∏è Enable strategic optimizations for maximum performance
                {% endif %}
            </p>
        </div>
        
        <form method="post">
        
        <h2 style="color: #e74c3c; border-bottom: 2px solid #e74c3c; padding-bottom: 5px;">üîê Account Credentials</h2>
        
        <label for="EMAIL">Email:</label>
        <input type="email" id="EMAIL" name="EMAIL" value="{{ current.EMAIL }}" required>
        <small>Your AIS account email address (found on the US Visa website login page)</small>

        <label for="PASSWORD">Password:</label>
        <input type="password" id="PASSWORD" name="PASSWORD" value="{{ current.PASSWORD }}" required>
        <small>Your AIS account password</small>

        <h2 style="color: #9b59b6; border-bottom: 2px solid #9b59b6; padding-bottom: 5px;">üìÖ Appointment Details</h2>

        <label for="CURRENT_APPOINTMENT_DATE">Current Appointment Date (YYYY-MM-DD):</label>
        <input type="date" id="CURRENT_APPOINTMENT_DATE" name="CURRENT_APPOINTMENT_DATE" value="{{ current.CURRENT_APPOINTMENT_DATE }}" required>
        <small>The date of your currently scheduled appointment (check your appointment confirmation email or AIS dashboard)</small>

        <label for="LOCATION">Location:</label>
        <input type="text" id="LOCATION" name="LOCATION" value="{{ current.LOCATION }}" required>
        <small>The embassy/consulate location for your appointment (e.g., "Ottawa - U.S. Embassy") - check your current appointment details</small>

        <label for="START_DATE">Start Date (YYYY-MM-DD):</label>
        <input type="date" id="START_DATE" name="START_DATE" value="{{ current.START_DATE }}" required>
        <small>The earliest date you're willing to accept a new appointment</small>

        <label for="END_DATE">End Date (YYYY-MM-DD):</label>
        <input type="date" id="END_DATE" name="END_DATE" value="{{ current.END_DATE }}" required>
        <small>The latest date you're willing to accept a new appointment</small>

        <label for="CHECK_FREQUENCY_MINUTES">Check Frequency (minutes):</label>
        <input type="number" id="CHECK_FREQUENCY_MINUTES" name="CHECK_FREQUENCY_MINUTES" value="{{ current.CHECK_FREQUENCY_MINUTES }}" required>
        <small>Base checking interval (recommended: 3-5 minutes for optimal strategic optimization)</small>

        <h2 style="color: #2E8B57; border-bottom: 2px solid #2E8B57; padding-bottom: 5px;">üöÄ Strategic Optimization Settings</h2>
        
        <label for="BURST_MODE_ENABLED" class="checkbox-label">
            <input type="checkbox" id="BURST_MODE_ENABLED" name="BURST_MODE_ENABLED" {% if current.BURST_MODE_ENABLED == 'True' %}checked{% endif %}> üí• Enable Burst Mode
        </label>
        <small>Rapid 30-second checking during high-opportunity windows (recommended: enabled)</small>

        <label for="MULTI_LOCATION_CHECK" class="checkbox-label">
            <input type="checkbox" id="MULTI_LOCATION_CHECK" name="MULTI_LOCATION_CHECK" {% if current.MULTI_LOCATION_CHECK == 'True' %}checked{% endif %}> üåç Multi-Location Checking
        </label>
        <small>Monitor multiple consulates simultaneously for more opportunities (recommended: enabled)</small>

        <label for="BACKUP_LOCATIONS">Backup Locations:</label>
        <input type="text" id="BACKUP_LOCATIONS" name="BACKUP_LOCATIONS" value="{{ current.BACKUP_LOCATIONS }}" placeholder="Toronto,Montreal,Vancouver">
        <small>Comma-separated list of alternative consulates to monitor (e.g., Toronto,Montreal,Vancouver)</small>

        <label for="PRIME_HOURS_START">Prime Hours Start (24-hour format):</label>
        <input type="text" id="PRIME_HOURS_START" name="PRIME_HOURS_START" value="{{ current.PRIME_HOURS_START }}" placeholder="6,12,17,22">
        <small>Hours when appointments are most likely released (e.g., 6,12,17,22 for 6 AM, 12 PM, 5 PM, 10 PM)</small>

        <label for="PRIME_HOURS_END">Prime Hours End (24-hour format):</label>
        <input type="text" id="PRIME_HOURS_END" name="PRIME_HOURS_END" value="{{ current.PRIME_HOURS_END }}" placeholder="9,14,19,1">
        <small>End of prime time windows (e.g., 9,14,19,1 for 9 AM, 2 PM, 7 PM, 1 AM)</small>

        <label for="PRIME_TIME_BACKOFF_MULTIPLIER">Prime Time Speed Multiplier:</label>
        <input type="number" step="0.1" id="PRIME_TIME_BACKOFF_MULTIPLIER" name="PRIME_TIME_BACKOFF_MULTIPLIER" value="{{ current.PRIME_TIME_BACKOFF_MULTIPLIER }}" placeholder="0.5">
        <small>Speed multiplier during prime time (0.5 = 50% faster, recommended: 0.5)</small>

        <label for="WEEKEND_FREQUENCY_MULTIPLIER">Weekend Frequency Multiplier:</label>
        <input type="number" step="0.1" id="WEEKEND_FREQUENCY_MULTIPLIER" name="WEEKEND_FREQUENCY_MULTIPLIER" value="{{ current.WEEKEND_FREQUENCY_MULTIPLIER }}" placeholder="2.0">
        <small>Weekend checking adjustment (2.0 = half as frequent, recommended: 2.0)</small>

        <label for="PATTERN_LEARNING_ENABLED" class="checkbox-label">
            <input type="checkbox" id="PATTERN_LEARNING_ENABLED" name="PATTERN_LEARNING_ENABLED" {% if current.PATTERN_LEARNING_ENABLED == 'True' %}checked{% endif %}> üß† Pattern Learning
        </label>
        <small>Learn from appointment release patterns and adapt timing (recommended: enabled)</small>

        <h2 style="color: #4682B4; border-bottom: 2px solid #4682B4; padding-bottom: 5px;">üìß Email Notification Settings</h2>

        <label for="SMTP_SERVER">SMTP Server:</label>
        <input type="text" id="SMTP_SERVER" name="SMTP_SERVER" value="{{ current.SMTP_SERVER }}" required>
        <small>Your email provider's SMTP server (e.g., smtp.gmail.com for Gmail, smtp.outlook.com for Outlook)</small>

        <label for="SMTP_PORT">SMTP Port:</label>
        <input type="number" id="SMTP_PORT" name="SMTP_PORT" value="{{ current.SMTP_PORT }}" required>
        <small>The port for your SMTP server (usually 587 for TLS, 465 for SSL)</small>

        <label for="SMTP_USER">SMTP User:</label>
        <input type="email" id="SMTP_USER" name="SMTP_USER" value="{{ current.SMTP_USER }}" required>
        <small>Your email address for sending notifications (usually the same as your login email)</small>

        <label for="SMTP_PASS">SMTP Password:</label>
        <input type="password" id="SMTP_PASS" name="SMTP_PASS" value="{{ current.SMTP_PASS }}" required>
        <small>Your email password or app password (for Gmail, use an app password from Google Account settings)</small>

        <label for="NOTIFY_EMAIL">Notify Email:</label>
        <input type="email" id="NOTIFY_EMAIL" name="NOTIFY_EMAIL" value="{{ current.NOTIFY_EMAIL }}" required>
        <small>The email address where you want to receive notifications (can be the same as SMTP User)</small>

        <label for="AUTO_BOOK" class="checkbox-label">
            <input type="checkbox" id="AUTO_BOOK" name="AUTO_BOOK" {% if current.AUTO_BOOK == 'True' %}checked{% endif %}> ü§ñ Auto Book
        </label>
        <small>Whether to automatically book found appointments or just send notifications (recommended: unchecked for safety)</small>

        <h2 style="color: #8B4513; border-bottom: 2px solid #8B4513; padding-bottom: 5px;">‚öôÔ∏è Performance Settings</h2>

        <label for="DRIVER_RESTART_CHECKS">Driver Restart Interval:</label>
        <input type="number" id="DRIVER_RESTART_CHECKS" name="DRIVER_RESTART_CHECKS" value="{{ current.DRIVER_RESTART_CHECKS }}" placeholder="50">
        <small>Restart browser driver after this many checks for memory optimization (recommended: 50)</small>

        <label for="MAX_RETRY_ATTEMPTS">Max Retry Attempts:</label>
        <input type="number" id="MAX_RETRY_ATTEMPTS" name="MAX_RETRY_ATTEMPTS" value="{{ current.MAX_RETRY_ATTEMPTS }}" placeholder="2">
        <small>Maximum retry attempts for failed operations (recommended: 2)</small>

        <label for="SLEEP_JITTER_SECONDS">Sleep Jitter (seconds):</label>
        <input type="number" id="SLEEP_JITTER_SECONDS" name="SLEEP_JITTER_SECONDS" value="{{ current.SLEEP_JITTER_SECONDS }}" placeholder="60">
        <small>Random variation in sleep timing to appear more human-like (recommended: 60)</small>

        <div style="background-color: #f0f8ff; border-left: 4px solid #1e90ff; padding: 15px; margin: 20px 0;">
            <h3 style="margin-top: 0; color: #1e90ff;">üöÄ Strategic Optimization Benefits</h3>
            <ul style="margin: 10px 0;">
                <li><strong>3-5x better catch rate</strong> during prime time windows</li>
                <li><strong>60-80% faster response</strong> time (30-90 seconds vs 2-5 minutes)</li>
                <li><strong>4x more opportunities</strong> with multi-location coverage</li>
                <li><strong>Intelligent resource usage</strong> with weekend optimization</li>
            </ul>
        </div>

        <button type="submit" style="font-size: 16px; padding: 12px 24px;">üíæ Save Strategic Configuration</button>
    </form>
    </div>
</body>
</html>